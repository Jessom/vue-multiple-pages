(function(d,c,a){var b=0;d.Lazyload=d.Class.extend({init:function(g,f){var e=this;this.container=this.element=g;this.options=d.extend({selector:"",diff:false,force:false,autoDestroy:true,duration:100},f);this._key=0;this._containerIsNotDocument=this.container.nodeType!==9;this._callbacks={};this._init()},_init:function(){this._initLoadFn();this.addElements();this._loadFn();d.ready(function(){this._loadFn()}.bind(this));this.resume()},_initLoadFn:function(){var e=this;e._loadFn=this._buffer(function(){if(e.options.autoDestroy&&e._counter==0&&d.isEmptyObject(e._callbacks)){e.destroy()}e._loadItems()},e.options.duration,e)},_createLoader:function(i){var g,j,e=[],f;return function(h){if(!j){j=true;i(function(k){g=k;while(f=e.shift()){try{f&&f.apply(null,[g])}catch(l){setTimeout(function(){throw l},0)}}})}if(g){h&&h.apply(null,[g]);return g}h&&e.push(h);return g}},_buffer:function(g,e,f){var k;var h=0;var j=0;var e=e||150;function i(){if(k){k.cancel();k=0}h=d.now();g.apply(f||this,arguments);j=d.now()}return d.extend(function(){if((!h)||(j>=h&&d.now()-j>e)||(j<h&&d.now()-h>e*8)){i()}else{if(k){k.cancel()}k=d.later(i,e,null,arguments)}},{stop:function(){if(k){k.cancel();k=0}}})},_getBoundingRect:function(m){var l,p,h,o;if(m!==undefined){l=m.offsetHeight;p=m.offsetWidth;var j=d.offset(m);h=j.left;o=j.top}else{l=c.innerHeight;p=c.innerWidth;h=0;o=c.pageYOffset}var r=this.options.diff;var q=r===false?p:r;var k=0;var i=q;var n=r===false?l:r;var g=0;var f=n;var s=h+p;var e=o+l;h-=k;s+=i;o-=g;e+=f;return{left:h,top:o,right:s,bottom:e}},_cacheWidth:function(e){if(e._mui_lazy_width){return e._mui_lazy_width}return e._mui_lazy_width=e.offsetWidth},_cacheHeight:function(e){if(e._mui_lazy_height){return e._mui_lazy_height}return e._mui_lazy_height=e.offsetHeight},_isCross:function(f,e){var g={};g.top=Math.max(f.top,e.top);g.bottom=Math.min(f.bottom,e.bottom);g.left=Math.max(f.left,e.left);g.right=Math.min(f.right,e.right);return g.bottom>=g.top&&g.right>=g.left},_elementInViewport:function(g,l,k){if(!g.offsetWidth){return false}var h=d.offset(g);var m=true;var j;var f=h.left;var i=h.top;var e={left:f,top:i,right:f+this._cacheWidth(g),bottom:i+this._cacheHeight(g)};j=this._isCross(l,e);if(j&&k){m=this._isCross(k,e)}return m&&j},_loadItems:function(){var e=this;if(e._containerIsNotDocument&&!e.container.offsetWidth){return}e._windowRegion=e._getBoundingRect();if(e._containerIsNotDocument){e._containerRegion=e._getBoundingRect(this.container)}d.each(e._callbacks,function(f,g){g&&e._loadItem(f,g)})},_loadItem:function(h,l){var g=this;l=l||g._callbacks[h];if(!l){return true}var j=l.el;var f=false;var i=l.fn;if(g.options.force||g._elementInViewport(j,g._windowRegion,g._containerRegion)){try{f=i.call(g,j,h)}catch(k){setTimeout(function(){throw k},0)}}if(f!==false){delete g._callbacks[h]}return f},addCallback:function(h,g){var e=this;var i=e._callbacks;var j={el:h,fn:g||d.noop};var f=++this._key;i[f]=j;if(e._windowRegion){e._loadItem(f,j)}else{e.refresh()}},addElements:function(g){var e=this;e._counter=e._counter||0;var f=[];if(!g&&e.options.selector){f=e.container.querySelectorAll(e.options.selector)}else{d.each(g,function(h,i){f=f.concat(d.qsa(e.options.selector,i))})}if(e._containerIsNotDocument){e._containerRegion=e._getBoundingRect(e.container)}d.each(f,function(h,i){if(!i.getAttribute("data-lazyload-id")){if(e.addElement(i)){i.setAttribute("data-lazyload-id",b++);e.addCallback(i,e.handle)}}})},addElement:function(e){return true},handle:function(){},refresh:function(e){if(e){this.addElements()}this._loadFn()},pause:function(){var e=this._loadFn;if(this._destroyed){return}c.removeEventListener("scroll",e);c.removeEventListener(d.EVENT_MOVE,e);c.removeEventListener("resize",e);if(this._containerIsNotDocument){this.container.removeEventListener("scrollend",e);this.container.removeEventListener("scroll",e);this.container.removeEventListener(d.EVENT_MOVE,e)}},resume:function(){var e=this._loadFn;if(this._destroyed){return}c.addEventListener("scroll",e,false);c.addEventListener(d.EVENT_MOVE,e,false);c.addEventListener("resize",e,false);if(this._containerIsNotDocument){this.container.addEventListener("scrollend",e,false);this.container.addEventListener("scroll",e,false);this.container.addEventListener(d.EVENT_MOVE,e,false)}},destroy:function(){var e=this;e.pause();e._callbacks={};d.trigger(this.container,"destroy",e);e._destroyed=1}})})(mui,window,document);